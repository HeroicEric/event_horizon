%h1= "Submission for #{@submission.assignment.title}"

#submission-details
  .user= "Submitted by #{@submission.user.username}"

#submission
  ~ render_submission(@submission)

#comments
  - @submission.comments.each do |comment|
    - if comment.persisted?
      .comment
        .user
          - if comment.line_number.nil?
            = "#{comment.user.username} commented"
          - else
            = "#{comment.user.username} commented on line #{comment.line_number}"

        .body= comment.body

  = form_for [@submission, @comment] do |f|
    = f.label :line_number, "Line Number"
    = f.text_field :line_number

    = f.label :body, "Comment"
    = f.text_area :body, rows: 5
    - if @comment.errors[:body].any?
      %small.error= @comment.errors[:body].first

    = f.submit "Submit", class: "button"
